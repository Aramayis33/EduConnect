<!DOCTYPE html>
<html lang="hy" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ‘ª÷Ä’°’§’°÷Ä’±’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä</title>
    <link rel="stylesheet" href="/css/adminPageStyle.css" />
    <link rel="stylesheet" href="/css/adminEvents.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 10px;
        }
        .pagination button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            cursor: pointer;
            border-radius: 4px;
        }
        .pagination button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
        .pagination button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
<nav class="nav">
    <div class="nav-header">
        <h1>EduConnect</h1>
        <span th:text="${session.admin.name} ?: '‘±’§’¥’´’∂'"></span>
    </div>
    <ul>
        <li><a th:classappend="${activePage == 'home' ? 'active' : ''}" href="/admin/home">üè† ‘≥’¨’≠’°’æ’∏÷Ä</a></li>
        <li><a th:classappend="${activePage == 'students' ? 'active' : ''}" href="/admin/students">üéì ’à÷Ç’Ω’°’∂’∏’≤’∂’•÷Ä</a></li>
        <li><a th:classappend="${activePage == 'teachers' ? 'active' : ''}" href="/admin/teachers">üë©‚Äçüè´ ‘¥’°’Ω’°’≠’∏’Ω’∂’•÷Ä</a></li>
        <li><a th:classappend="${activePage == 'groups' ? 'active' : ''}" href="/admin/groups">üßë‚Äçü§ù‚Äçüßë ‘Ω’¥’¢’•÷Ä</a></li>
        <li><a th:classappend="${activePage == 'subjects' ? 'active' : ''}" href="/admin/subjects">üìö ‘±’º’°÷Ä’Ø’°’∂’•÷Ä</a></li>
        <li><a th:classappend="${activePage == 'schedule' ? 'active' : ''}" href="/admin/schedule">üóìÔ∏è ‘¥’°’Ω’°÷Å’∏÷Ç÷Å’°’Ø</a></li>
        <li><a th:classappend="${activePage == 'library' ? 'active' : ''}" href="/admin/library">üìñ ‘≥÷Ä’°’§’°÷Ä’°’∂</a></li>
        <li><a th:classappend="${activePage == 'videos' ? 'active' : ''}" href="/admin/videos">üé• ’é’´’§’•’∏’§’°’Ω’•÷Ä</a></li>
        <li><a th:classappend="${activePage == 'admins' ? 'active' : ''}" href="/admin/admins">üõ†Ô∏è ‘±’§’¥’´’∂’∂’•÷Ä</a></li>
        <li><a th:classappend="${activePage == 'events' ? 'active' : ''}" href="/admin/events">üîî ‘ª÷Ä’°’§’°÷Ä’±’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä</a></li>
        <li><a href="/admin/logout" class="logout">üö™ ‘µ’¨÷Ñ</a></li>
    </ul>
</nav>

<!-- Main Content -->
<main class="content">
    <!-- Header (Banner) -->
    <section class="banner">
        <div class="banner-content">
            <div class="banner-title">
                <h2>üîî ‘ª÷Ä’°’§’°÷Ä’±’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä</h2>
                <span class="count-label">‘∏’∂’§’∞’°’∂’∏÷Ç÷Ä’ù <strong th:text="${studentNotifications?.size() + teacherNotifications?.size()} ?: '0'"></strong></span>
            </div>
            <div class="banner-actions">
                <button class="banner-btn" onclick="openModal('student')">+ ’à÷Ç’Ω’°’∂’∏’≤’´’∂</button>
                <button class="banner-btn" onclick="openModal('teacher')">+ ‘¥’°’Ω’°’≠’∏’Ω’´’∂</button>
                <button class="banner-btn" onclick="openModal('student_group')">+ ’à÷Ç’Ω’°’∂’∏’≤’∂’•÷Ä’´ ’≠’¥’¢’´’∂</button>
                <button class="banner-btn" onclick="openModal('teacher_group')">+ ‘¥’°’Ω’°’≠’∏’Ω’∂’•÷Ä’´ ’≠’¥’¢’´’∂</button>
            </div>
        </div>
        <div class="filters">
            <div class="filter-item">
                <label for="tableFilter">’ë’∏÷Ç÷Å’°’§÷Ä’•’¨</label>
                <select id="tableFilter" onchange="filterTable()">
                    <option value="student" th:selected="${selectedFilter == 'student'}">’à÷Ç’Ω’°’∂’∏’≤’∂’•÷Ä’´ ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥’∂’•÷Ä</option>
                    <option value="teacher" th:selected="${selectedFilter == 'teacher'}">‘¥’°’Ω’°’≠’∏’Ω’∂’•÷Ä’´ ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥’∂’•÷Ä</option>
                </select>
            </div>
        </div>
    </section>

    <!-- Notifications List -->
    <section class="notifications-list">
        <!-- Student Notifications Table -->
        <div class="table-header" th:classappend="${selectedFilter == 'student' ? '' : 'hidden'}">
            <h3>’à÷Ç’Ω’°’∂’∏’≤’∂’•÷Ä’´ ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥’∂’•÷Ä</h3>
        </div>
        <div class="table-wrapper" th:classappend="${selectedFilter == 'student' ? '' : 'hidden'}">
            <table id="studentNotificationsTable">
                <thead>
                <tr>
                    <th>’é’•÷Ä’∂’°’£’´÷Ä</th>
                    <th>’Ä’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂</th>
                    <th>‘±’¥’Ω’°’©’´’æ</th>
                    <th>’à÷Ç’Ω’°’∂’∏’≤</th>
                    <th>‘Ω’∏÷Ç’¥’¢</th>
                    <th>‘æ’°’∂’∏÷Ç÷Å’∏’≤</th>
                </tr>
                </thead>
                <tbody id="studentNotificationsBody">
                <tr th:each="notification : ${studentNotifications}">
                    <td th:text="${notification.messageTitle}"></td>
                    <td th:text="${notification.messageText}"></td>
                    <td th:text="${#dates.format(notification.date, 'yyyy-MM-dd')}"></td>
                    <td th:text="${notification.student?.name ?: ''} + ' ' + ${notification.student?.surname ?: ''}"></td>
                    <td th:text="${notification.group?.groupNumber}"></td>
                    <td th:text="${notification.messageType=='admin'? '‘±’§’¥’´’∂’´’Ω’ø÷Ä’°’ø’∏÷Ä':'’Ä’°’¥’°’Ø’°÷Ä’£'}"></td>
                </tr>
                </tbody>
            </table>
            <div class="pagination" id="studentPagination"></div>
        </div>

        <!-- Teacher Notifications Table -->
        <div class="table-header" th:classappend="${selectedFilter == 'teacher' ? '' : 'hidden'}">
            <h3>‘¥’°’Ω’°’≠’∏’Ω’∂’•÷Ä’´ ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥’∂’•÷Ä</h3>
        </div>
        <div class="table-wrapper" th:classappend="${selectedFilter == 'teacher' ? '' : 'hidden'}">
            <table id="teacherNotificationsTable">
                <thead>
                <tr>
                    <th>’é’•÷Ä’∂’°’£’´÷Ä</th>
                    <th>’Ä’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂</th>
                    <th>‘±’¥’Ω’°’©’´’æ</th>
                    <th>‘¥’°’Ω’°’≠’∏’Ω</th>
                    <th>‘±’º’°÷Ä’Ø’°</th>
                    <th>‘æ’°’∂’∏÷Ç÷Å’∏’≤</th>
                </tr>
                </thead>
                <tbody id="teacherNotificationsBody">
                <tr th:each="notification : ${teacherNotifications}">
                    <td th:text="${notification.messageTitle}"></td>
                    <td th:text="${notification.messageText}"></td>
                    <td th:text="${#dates.format(notification.date, 'yyyy-MM-dd')}"></td>
                    <td th:text="${notification.teacher?.name?: ''} + ' ' + ${notification.teacher?.surname?: ' '}"></td>
                    <td th:text="${notification.subjects?.name}"></td>
                    <td th:text="${notification.messageType=='admin'? '‘±’§’¥’´’∂’´’Ω’ø÷Ä’°’ø’∏÷Ä':'’Ä’°’¥’°’Ø’°÷Ä’£'}"></td>
                </tr>
                </tbody>
            </table>
            <div class="pagination" id="teacherPagination"></div>
        </div>
    </section>

    <!-- Modals -->
    <!-- Student Notification Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('student')">√ó</span>
            <h3>’ç’ø’•’≤’Æ’•’¨ ’∏÷Ç’Ω’°’∂’∏’≤’´ ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥</h3>
            <form id="studentNotificationForm" onsubmit="createStudentNotification(event)">
                <div class="form-group">
                    <label for="studentMessageTitle">’é’•÷Ä’∂’°’£’´÷Ä</label>
                    <input type="text" id="studentMessageTitle" name="messageTitle" required>
                </div>
                <div class="form-group">
                    <label for="studentMessageText">’Ä’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂</label>
                    <textarea id="studentMessageText" name="messageText" required></textarea>
                </div>
                <div class="form-group">
                    <label for="studentId">’à÷Ç’Ω’°’∂’∏’≤</label>
                    <select id="studentId" name="studentId" required>
                        <option value="">‘∏’∂’ø÷Ä’•÷Ñ ’∏÷Ç’Ω’°’∂’∏’≤</option>
                        <option th:each="student : ${students}" th:value="${student.id}"
                                th:text="${student.name} + ' ' + ${student.surname}"></option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">’Ä’°’Ω’ø’°’ø’•’¨</button>
            </form>
        </div>
    </div>

    <!-- Teacher Notification Modal -->
    <div id="teacherModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('teacher')">√ó</span>
            <h3>’ç’ø’•’≤’Æ’•’¨ ’§’°’Ω’°’≠’∏’Ω’´ ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥</h3>
            <form id="teacherNotificationForm" onsubmit="createTeacherNotification(event)">
                <div class="form-group">
                    <label for="teacherMessageTitle">’é’•÷Ä’∂’°’£’´÷Ä</label>
                    <input type="text" id="teacherMessageTitle" name="messageTitle" required>
                </div>
                <div class="form-group">
                    <label for="teacherMessageText">’Ä’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂</label>
                    <textarea id="teacherMessageText" name="messageText" required></textarea>
                </div>
                <div class="form-group">
                    <label for="teacherId">‘¥’°’Ω’°’≠’∏’Ω</label>
                    <select id="teacherId" name="teacherId" required>
                        <option value="">‘∏’∂’ø÷Ä’•÷Ñ ’§’°’Ω’°’≠’∏’Ω</option>
                        <option th:each="teacher : ${teachers}" th:value="${teacher.id}"
                                th:text="${teacher.name} + ' ' + ${teacher.surname}"></option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">’Ä’°’Ω’ø’°’ø’•’¨</button>
            </form>
        </div>
    </div>

    <!-- Student Group Notification Modal -->
    <div id="student_groupModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('student_group')">√ó</span>
            <h3>’ç’ø’•’≤’Æ’•’¨ ’∏÷Ç’Ω’°’∂’∏’≤’∂’•÷Ä’´ ’≠’¥’¢’´ ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥</h3>
            <form id="studentGroupNotificationForm" onsubmit="createStudentGroupNotification(event)">
                <div class="form-group">
                    <label for="studentGroupMessageTitle">’é’•÷Ä’∂’°’£’´÷Ä</label>
                    <input type="text" id="studentGroupMessageTitle" name="messageTitle" required>
                </div>
                <div class="form-group">
                    <label for="studentGroupMessageText">’Ä’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂</label>
                    <textarea id="studentGroupMessageText" name="messageText" required></textarea>
                </div>
                <div class="form-group">
                    <label for="groupId">‘Ω’∏÷Ç’¥’¢</label>
                    <select id="groupId" name="groupId" required>
                        <option value="">‘∏’∂’ø÷Ä’•÷Ñ ’≠’∏÷Ç’¥’¢</option>
                        <option value="all">‘≤’∏’¨’∏÷Ä ’≠’¥’¢’•÷Ä’´’∂</option>
                        <option th:each="group : ${groupInfos}" th:value="${group.id}"
                                th:text="${group.groupNumber}"></option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">’Ä’°’Ω’ø’°’ø’•’¨</button>
            </form>
        </div>
    </div>

    <!-- Teacher Group Notification Modal -->
    <div id="teacher_groupModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('teacher_group')">√ó</span>
            <h3>’ç’ø’•’≤’Æ’•’¨ ’§’°’Ω’°’≠’∏’Ω’∂’•÷Ä’´ ’≠’¥’¢’´ ’Æ’°’∂’∏÷Ç÷Å’∏÷Ç’¥</h3>
            <form id="teacherGroupNotificationForm" onsubmit="createTeacherGroupNotification(event)">
                <div class="form-group">
                    <label for="teacherGroupMessageTitle">’é’•÷Ä’∂’°’£’´÷Ä</label>
                    <input type="text" id="teacherGroupMessageTitle" name="messageTitle" required>
                </div>
                <div class="form-group">
                    <label for="teacherGroupMessageText">’Ä’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂</label>
                    <textarea id="teacherGroupMessageText" name="messageText" required></textarea>
                </div>
                <div class="form-group">
                    <label for="subjectId">‘±’º’°÷Ä’Ø’°</label>
                    <select id="subjectId" name="subjectId" required>
                        <option value="">‘∏’∂’ø÷Ä’•÷Ñ ’°’º’°÷Ä’Ø’°</option>
                        <option value="all">‘≤’∏’¨’∏÷Ä ’≠’¥’¢’•÷Ä’´’∂</option>
                        <option th:each="subject : ${subjects}" th:value="${subject.id}"
                                th:text="${subject.name}"></option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">’Ä’°’Ω’ø’°’ø’•’¨</button>
            </form>
        </div>
    </div>
</main>

<script src="/js/adminEvents.js"></script>
</body>
</html>